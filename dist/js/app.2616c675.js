(function(){"use strict";var t={2374:function(t,a,e){var r=e(9242),i=e(3396);const s=(0,i.Uk)("basicShape"),n=(0,i.Uk)(" | "),l=(0,i.Uk)("mouseSelector");function h(t,a){const e=(0,i.up)("router-link"),r=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("nav",null,[(0,i.Wm)(e,{to:"/"},{default:(0,i.w5)((()=>[s])),_:1}),n,(0,i.Wm)(e,{to:"/mouseSelector"},{default:(0,i.w5)((()=>[l])),_:1})]),(0,i.Wm)(r)],64)}var o=e(89);const c={},d=(0,o.Z)(c,[["render",h]]);var u=d,m=e(678);function w(t,a,e,r,s,n){const l=(0,i.up)("basicShape");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(l)])}var v=e(7139);const f=t=>((0,i.dD)("data-v-4e0f57a4"),t=t(),(0,i.Cn)(),t),p={class:"hello"},P={class:"content-container"},g=f((()=>(0,i._)("h3",null,"每个图形属性值的获取与设置通过 get 和 set 方法实现",-1))),b=f((()=>(0,i._)("p",null,"get 方法: 参数是一个 string 类型",-1))),y=f((()=>(0,i._)("p",null,"set 方法: 参数是一个 PartialDrawParam 对象类型",-1))),k={class:"form-container"},A={class:"form-content-container"},O=["onUpdate:modelValue"],_=f((()=>(0,i._)("input",{type:"submit",value:"设置完成",class:"submit"},null,-1))),T={class:"form-content-container"},x=["onUpdate:modelValue"],S=f((()=>(0,i._)("input",{type:"submit",value:"设置完成",class:"submit"},null,-1)));function D(t,a,e,s,n,l){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("h1",p,(0,v.zw)(t.Title),1),(0,i._)("div",P,[(0,i._)("h3",null,(0,v.zw)(t.contentTitle),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.contentArray,((t,a)=>((0,i.wg)(),(0,i.iD)("p",{key:a},(0,v.zw)(t),1)))),128)),(0,i._)("h3",null,(0,v.zw)(t.describeTitle),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.describeArray,((t,a)=>((0,i.wg)(),(0,i.iD)("p",{key:a},(0,v.zw)(t),1)))),128)),g,b,y,(0,i._)("div",k,[(0,i._)("div",null,[(0,i._)("h3",null,(0,v.zw)(t.rectAttrTitle),1),(0,i._)("form",{onSubmit:a[0]||(a[0]=(0,r.iM)(((...a)=>t.circleSubmit&&t.circleSubmit(...a)),["prevent"]))},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.rectFormData,((t,a)=>((0,i.wg)(),(0,i.iD)("div",{key:a},[(0,i._)("div",A,[(0,i._)("span",null,(0,v.zw)(t.title)+": ",1),(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":a=>t.value=a,placeholder:"0"},null,8,O),[[r.nr,t.value]])])])))),128)),_],32)]),(0,i._)("div",null,[(0,i._)("h3",null,(0,v.zw)(t.circleAttrTitle),1),(0,i._)("form",{onSubmit:a[1]||(a[1]=(0,r.iM)(((...a)=>t.circleSubmit&&t.circleSubmit(...a)),["prevent"]))},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.circleFormData,((t,a)=>((0,i.wg)(),(0,i.iD)("div",{key:a},[(0,i._)("div",T,[(0,i._)("span",null,(0,v.zw)(t.title)+": ",1),(0,i.wy)((0,i._)("input",{type:"number","onUpdate:modelValue":a=>t.value=a,placeholder:"0"},null,8,x),[[r.nr,t.value]])])])))),128)),S],32)])])])],64)}var W=e(2482);class Y{constructor(t){(0,W.Z)(this,"canvas",void 0),(0,W.Z)(this,"ctx",void 0),(0,W.Z)(this,"canvasParam",{width:1e3,height:600,id:""}),(0,W.Z)(this,"drawTargetArray",[]),(0,W.Z)(this,"lastX",0),(0,W.Z)(this,"lastY",0),(0,W.Z)(this,"delay",1e3/60);const a=document.createElement("canvas"),e=a.getContext("2d");if(a.onmousedown=this.onmousedown.bind(this),a.onmouseup=this.onmouseup.bind(this),t){let e;for(e in t.width||(a.width=this.canvasParam.width),t.height||(a.height=this.canvasParam.height),t)"width"==e||"height"==e?a[e]=t[e]:this.canvasParam[e]=t[e]}else a.width=this.canvasParam.width,a.height=this.canvasParam.height;const r=document.body;r.appendChild(a),e&&(this.ctx=e),this.canvas=a}add(t){return t.map((t=>{-1==this.drawTargetArray.indexOf(t)&&(t.draw(this),this.drawTargetArray.push(t))})),this}remove(t){this.ctx.clearRect(0,0,this.canvasParam.width,this.canvasParam.height);const a=[];return this.drawTargetArray.map((e=>{-1==t.indexOf(e)&&(e.draw(this),a.push(e))})),this.drawTargetArray=a,this}renderAll(){this.ctx.clearRect(0,0,this.canvasParam.width,this.canvasParam.height),this.drawTargetArray.map((t=>{t.draw(this)}))}onmousedown(t){this.lastX=t.offsetX,this.lastY=t.offsetY,this.drawTargetArray.map((t=>{const a=t.drawParam;if(a.selectable){const e=t.vertexWidth,r=t.vertexHeight,i=t.vertexArray,s=a.scaleWidth,n=a.scaleHeight,l=a.left,h=a.top,o=(this.lastX-l)/s+l,c=(this.lastY-h)/n+h;a.angle,Math.PI;for(let a=0;a<i.length;a++)if(o>=i[a][0]-e&&o<=i[a][0]+e&&c>=i[a][1]-r&&c<=i[a][1]+r)return this.canvas.onmousemove=this.throttle(this.onmousemove.bind(this,t,a),this.delay),t;o>=i[0][0]&&o<=i[4][0]&&c>=i[0][1]&&c<=i[4][1]&&(this.canvas.onmousemove=this.throttle(this.onmousemove.bind(this,t,9),this.delay))}}))}onmouseup(){this.canvas.onmousemove=null}onmousemove(t,a,e){const r=e.offsetX,i=e.offsetY,s=r-this.lastX,n=i-this.lastY;9==a?(t.drawParam.left+=s,t.drawParam.top+=n):t.onmousemove(a,s,n),this.renderAll(),this.lastX=r,this.lastY=i}throttle(t,a){let e=!0;return function(){e&&(e=!1,setTimeout((()=>{t(),e=!0}),a))}}rotatePoint(t,a,e,r,i){const s=Math.round(t+(e-t)*Math.cos(i*Math.PI/180)+(a-r)*Math.sin(i*Math.PI/180)),n=Math.round(a+(e-t)*Math.sin(i*Math.PI/180)-(a-r)*Math.cos(i*Math.PI/180)),l=[s,n];return l}}var H,C=Y;(function(t){t["Left"]="left",t["Right"]="right",t["Top"]="top",t["Down"]="down"})(H||(H={}));class M{constructor(t){if((0,W.Z)(this,"drawParam",{left:0,top:0,dotArray:[[10,10]],width:50,height:50,radius:50,rX:20,rY:10,sAngle:0,eAngle:2,counterclockwise:!1,fill:"",stroke:"",shadowColor:"#000",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineCap:"butt",lineJoin:"miter",lineWidth:1,miterLimit:10,angle:0,scaleWidth:1,scaleHeight:1,globalAlpha:1,selectable:!1}),(0,W.Z)(this,"canvas",void 0),(0,W.Z)(this,"vertexArray",[]),(0,W.Z)(this,"vertexWidth",10),(0,W.Z)(this,"vertexHeight",10),(0,W.Z)(this,"requestID",void 0),(0,W.Z)(this,"animateOption",{vX:0,vY:0,sX:0,sY:0}),t){let a;for(a in t)this.drawParam[a]=t[a]}}get(t){return this.drawParam[t]}set(t){let a;for(a in t)this.drawParam[a]=t[a];return this}draw(t){this.canvas=t;const a=t.ctx;a.save(),a.beginPath(),a.shadowColor=this.drawParam.shadowColor,a.shadowBlur=this.drawParam.shadowBlur,a.shadowOffsetX=this.drawParam.shadowOffsetX,a.shadowOffsetY=this.drawParam.shadowOffsetY,a.lineCap=this.drawParam.lineCap,a.lineJoin=this.drawParam.lineJoin,a.lineWidth=this.drawParam.lineWidth,a.miterLimit=this.drawParam.miterLimit,a.globalAlpha=this.drawParam.globalAlpha,a.translate(this.drawParam.left,this.drawParam.top),a.rotate(this.drawParam.angle*Math.PI/180),a.scale(this.drawParam.scaleWidth,this.drawParam.scaleHeight),this.privateDraw(a),this.drawParam.fill&&this.drawParam.stroke?(a.fillStyle=this.drawParam.fill,a.fill(),a.strokeStyle=this.drawParam.stroke,a.stroke()):this.drawParam.fill?(a.fillStyle=this.drawParam.fill,a.fill()):(a.strokeStyle=this.drawParam.stroke,a.stroke()),a.closePath(),this.drawParam.selectable&&this.vertexDraw(a),a.restore()}vertexDraw(t){const a=this.vertexArray,e=this.vertexWidth,r=this.vertexHeight,i=this.drawParam.left,s=this.drawParam.top;t.save(),t.translate(-i,-s),t.lineCap="butt",t.lineJoin="miter",t.lineWidth=1,t.miterLimit=10,t.globalAlpha=.2,t.strokeStyle="#00a7d0",t.fillStyle="#00a7d0",t.beginPath(),a.map(((a,i)=>{0===i?t.moveTo(a[0],a[1]):t.lineTo(a[0],a[1]),t.fillRect(a[0]-e/2,a[1]-r/2,e,r)})),t.fillRect(a[1][0]-e/2,a[1][1]-3.5*r,e,r),t.closePath(),t.moveTo(a[1][0],a[1][1]-r/2),t.lineTo(a[1][0],a[1][1]-2.5*r),t.stroke(),t.restore()}animate(t,a,e){if(-1==this.canvas.drawTargetArray.indexOf(this)&&this.canvas.drawTargetArray.push(this),this.requestID=requestAnimationFrame(this.animate.bind(this,t,a,this.animateOption)),e){let t;for(t in e)this.animateOption[t]=e[t]}"number"==typeof a&&(t==H.Left&&this.drawParam.left>=a?(this.drawParam.left-=this.animateOption.vX,this.drawParam.top+=this.animateOption.vY):t==H.Right&&this.drawParam.left<=a?(this.drawParam.left+=this.animateOption.vX,this.drawParam.top+=this.animateOption.vY):t==H.Top&&this.drawParam.top>=a?(this.drawParam.left+=this.animateOption.vX,this.drawParam.top-=this.animateOption.vY):t==H.Down&&this.drawParam.top<=a?(this.drawParam.left+=this.animateOption.vX,this.drawParam.top+=this.animateOption.vY):cancelAnimationFrame(this.requestID)),this.animateOption.vX+=this.animateOption.sX,this.animateOption.vY+=this.animateOption.sY,this.canvas.renderAll()}privateDraw(t){}onmousemove(t,a,e){}}var X=M;class Z extends X{constructor(t){super(t)}privateDraw(t){t.rect(0,0,this.drawParam.width,this.drawParam.height),this.vertex()}vertex(){const t=this.drawParam.left,a=this.drawParam.top,e=this.drawParam.width,r=this.drawParam.height;this.vertexArray=[[t,a],[t+e/2,a],[t+e,a],[t+e,a+r/2],[t+e,a+r],[t+e/2,a+r],[t,a+r],[t,a+r/2]]}onmousemove(t,a,e){const r=this.drawParam.scaleWidth,i=this.drawParam.scaleHeight;switch(t){case 0:this.drawParam.left+=a,this.drawParam.top+=e,this.drawParam.width-=a/r,this.drawParam.height-=e/i;break;case 1:this.drawParam.top+=e,this.drawParam.height-=e/i;break;case 2:this.drawParam.top+=e,this.drawParam.width+=a/r,this.drawParam.height-=e/i;break;case 3:this.drawParam.width+=a/r;break;case 4:this.drawParam.width+=a/r,this.drawParam.height+=e/i;break;case 5:this.drawParam.height+=e/i;break;case 6:this.drawParam.left+=a,this.drawParam.width-=a/r,this.drawParam.height+=e/i;break;case 7:this.drawParam.left+=a,this.drawParam.width-=a/r;break}}}var j=Z;class I extends X{constructor(t){super(t)}privateDraw(t){t.arc(0,0,this.drawParam.radius,this.drawParam.sAngle*Math.PI,this.drawParam.eAngle*Math.PI,this.drawParam.counterclockwise),this.vertex()}vertex(){const t=this.drawParam.left,a=this.drawParam.top,e=this.drawParam.radius;this.vertexArray=[[t-e,a-e],[t,a-e],[t+e,a-e],[t+e,a],[t+e,a+e],[t,a+e],[t-e,a+e],[t-e,a]]}onmousemove(t,a,e){const r=this.drawParam.radius;switch(t){case 0:this.drawParam.left+=a,this.drawParam.top+=e,this.drawParam.scaleWidth-=a/r,this.drawParam.scaleHeight-=e/r;break;case 1:this.drawParam.top+=e,this.drawParam.scaleHeigh-=e/r;break;case 2:this.drawParam.left+=a,this.drawParam.top+=e,this.drawParam.scaleWidth+=a/r,this.drawParam.scaleHeight-=e/r;break;case 3:this.drawParam.left+=a,this.drawParam.scaleWidth+=a/r;break;case 4:this.drawParam.left+=a,this.drawParam.top+=e,this.drawParam.scaleWidth+=a/r,this.drawParam.scaleHeight+=e/r;break;case 5:this.drawParam.top+=e,this.drawParam.scaleHeight+=e/r;break;case 6:this.drawParam.left+=a,this.drawParam.top+=e,this.drawParam.scaleWidth-=a/r,this.drawParam.scaleHeight+=e/r;break;case 7:this.drawParam.left+=a,this.drawParam.scaleWidth-=a/r;break}}}var F=I;var R=(0,i.aZ)({name:"basicShapeView",data(){return{rect:new j,circle:new F,Title:"绘制基本形状",contentTitle:"绘制图形步骤：",contentArray:["第一步：创建画布 Canvas 实例 - let canvas = new Canvas()。","第二步：创建矩形 Rect 实例和圆形 Circle 实例 - let rect = new Rect(); let rect = new Rect()。","第三步：通过画布上的 add 方法把图形 rect 和 circle 添加到画布 Canvas 上 - canvas.add([rect, circle])。"],describeTitle:"属性描述说明：",describeArray:["Canvas 实例: 参数是一个对象类型，可以传入 width (类型 number)、height (类型 number) 去设置画布的大小，默认值 width 为 800, height 为 600。add 方法传入的参数类型是一个数组，数组里的类型为图形的实例对象。","Rect 实例：参数是一个对象类型，可以传入 left (类型 number)、top (类型 number) 去设置矩形的摆放位置, width (类型 number)、height (类型 number) 去设置矩形的大小, stroke (类型 string)、fill (类型 string) 去设置矩形描边与填充的颜色，剩下属性可以自行去了解学习。","Circle 实例：参数是一个对象类型，可以传入 left (类型 number)、top (类型 number) 去设置圆形的摆放位置, radius (类型 number) 去设置圆形的大小, stroke (类型 string)、fill (类型 string) 去设置圆形描边与填充的颜色，剩下属性可以自行去了解学习。"],rectAttrTitle:"矩形获取或设置属性值：",rectFormData:[{title:"left",value:0},{title:"top",value:0},{title:"width",value:0},{title:"height",value:0},{title:"lineWidth",value:1},{title:"angle",value:0},{title:"scaleWidth",value:1},{title:"scaleHeight",value:1}],circleAttrTitle:"圆形获取或设置属性值：",circleFormData:[{title:"left",value:0},{title:"top",value:0},{title:"radius",value:0},{title:"lineWidth",value:1},{title:"angle",value:0},{title:"scaleWidth",value:1},{title:"scaleHeight",value:1}]}},methods:{drawShape:function(){let t=new C,a=new j({left:50,top:50,width:50,height:50,stroke:"red"}),e=new F({left:800,top:80,radius:30,fill:"green"});t.add([a,e]),this.rect=a,this.circle=e},rectSubmit(){this.rectFormData.map((t=>{t.value?this.rect.set({[t.title]:t.value}):"lineWidth"==t.title||"scaleWidth"==t.title||"scaleHeight"==t.title?t.value=this.rect.get(t.title):this.rect.set({[t.title]:t.value}),console.log(this.rect.get(t.title))})),this.rect.canvas.renderAll()},circleSubmit(){this.circleFormData.map((t=>{t.value?this.circle.set({[t.title]:t.value}):"lineWidth"==t.title||"scaleWidth"==t.title||"scaleHeight"==t.title?t.value=this.circle.get(t.title):this.circle.set({[t.title]:t.value}),console.log(this.circle.get(t.title))})),this.circle.canvas.renderAll()}},created(){this.drawShape()}});const z=(0,o.Z)(R,[["render",D],["__scopeId","data-v-4e0f57a4"]]);var L=z,E=(0,i.aZ)({name:"basicShapeView",components:{basicShape:L}});const U=(0,o.Z)(E,[["render",w]]);var V=U;const q=[{path:"/",name:"basicShapeView",component:V},{path:"/mouseSelector",name:"mouseSelector",component:()=>e.e(443).then(e.bind(e,1646))}],B=(0,m.p7)({history:(0,m.PO)("/"),routes:q});var J=B,K=e(65),N=(0,K.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,r.ri)(u).use(N).use(J).mount("#app")}},a={};function e(r){var i=a[r];if(void 0!==i)return i.exports;var s=a[r]={exports:{}};return t[r](s,s.exports,e),s.exports}e.m=t,function(){var t=[];e.O=function(a,r,i,s){if(!r){var n=1/0;for(c=0;c<t.length;c++){r=t[c][0],i=t[c][1],s=t[c][2];for(var l=!0,h=0;h<r.length;h++)(!1&s||n>=s)&&Object.keys(e.O).every((function(t){return e.O[t](r[h])}))?r.splice(h--,1):(l=!1,s<n&&(n=s));if(l){t.splice(c--,1);var o=i();void 0!==o&&(a=o)}}return a}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[r,i,s]}}(),function(){e.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(a,{a:a}),a}}(),function(){e.d=function(t,a){for(var r in a)e.o(a,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:a[r]})}}(),function(){e.f={},e.e=function(t){return Promise.all(Object.keys(e.f).reduce((function(a,r){return e.f[r](t,a),a}),[]))}}(),function(){e.u=function(t){return"js/about.658e871a.js"}}(),function(){e.miniCssF=function(t){}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)}}(),function(){var t={},a="open-source-canvas-vue3-ts:";e.l=function(r,i,s,n){if(t[r])t[r].push(i);else{var l,h;if(void 0!==s)for(var o=document.getElementsByTagName("script"),c=0;c<o.length;c++){var d=o[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==a+s){l=d;break}}l||(h=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,e.nc&&l.setAttribute("nonce",e.nc),l.setAttribute("data-webpack",a+s),l.src=r),t[r]=[i];var u=function(a,e){l.onerror=l.onload=null,clearTimeout(m);var i=t[r];if(delete t[r],l.parentNode&&l.parentNode.removeChild(l),i&&i.forEach((function(t){return t(e)})),a)return a(e)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=u.bind(null,l.onerror),l.onload=u.bind(null,l.onload),h&&document.head.appendChild(l)}}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){e.p="/"}(),function(){var t={143:0};e.f.j=function(a,r){var i=e.o(t,a)?t[a]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise((function(e,r){i=t[a]=[e,r]}));r.push(i[2]=s);var n=e.p+e.u(a),l=new Error,h=function(r){if(e.o(t,a)&&(i=t[a],0!==i&&(t[a]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.src;l.message="Loading chunk "+a+" failed.\n("+s+": "+n+")",l.name="ChunkLoadError",l.type=s,l.request=n,i[1](l)}};e.l(n,h,"chunk-"+a,a)}},e.O.j=function(a){return 0===t[a]};var a=function(a,r){var i,s,n=r[0],l=r[1],h=r[2],o=0;if(n.some((function(a){return 0!==t[a]}))){for(i in l)e.o(l,i)&&(e.m[i]=l[i]);if(h)var c=h(e)}for(a&&a(r);o<n.length;o++)s=n[o],e.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return e.O(c)},r=self["webpackChunkopen_source_canvas_vue3_ts"]=self["webpackChunkopen_source_canvas_vue3_ts"]||[];r.forEach(a.bind(null,0)),r.push=a.bind(null,r.push.bind(r))}();var r=e.O(void 0,[998],(function(){return e(2374)}));r=e.O(r)})();
//# sourceMappingURL=app.2616c675.js.map